import{a as G}from"./chunk-FNZ3CGE5.js";import{a as U}from"./chunk-TNVVAGLP.js";import{I as j,L as q,M as A,g as z,h as M,i as $,w as N,x as B}from"./chunk-ESOQDHF6.js";import{h as L}from"./chunk-T2HTACBN.js";import{Aa as k,Kb as F,La as c,Ma as m,N as E,Oa as P,Pa as T,Qa as u,Ra as o,S as f,Sa as r,T as b,Ta as x,Ua as y,Va as h,Wa as l,ab as w,bb as a,cb as g,db as p,eb as Q,fb as D,jb as V,kb as S,lb as C,pa as n,wa as I,wb as v}from"./chunk-KIKRUHUI.js";var W=(i,t)=>t.id;function H(i,t){if(i&1&&(o(0,"div",14),x(1,"lucide-icon",15),o(2,"h3",16),a(3,"No patients in queue"),r(),o(4,"p",17),a(5,"Queue will appear here when patients arrive"),r()()),i&2){let e=l();n(),u("img",e.ClockIcon)("size",64)}}function J(i,t){if(i&1&&(o(0,"span"),a(1),r()),i&2){l(2);let e=C(0);n(),p("",e.age," years old")}}function K(i,t){if(i&1&&(o(0,"div",28),x(1,"lucide-icon",38),o(2,"p",39),a(3),r()()),i&2){l(2);let e=C(0),s=l(2);n(),u("img",s.AlertCircleIcon)("size",16),n(2),g(e.notes)}}function X(i,t){if(i&1&&(o(0,"p",29)(1,"strong"),a(2,"Diagnosis:"),r(),a(3),r()),i&2){let e=l(2).$implicit;n(3),p(" ",e.diagnosis," ")}}function Y(i,t){if(i&1){let e=y();o(0,"button",40),h("click",function(){f(e);let d=l(2).$implicit,_=l(2);return b(_.startVisit(d))}),x(1,"lucide-icon",41),o(2,"span"),a(3,"Start Visit"),r()()}if(i&2){let e=l(4);n(),u("img",e.PlayIcon)("size",20)}}function Z(i,t){if(i&1){let e=y();o(0,"button",42),h("click",function(){f(e);let d=l(2).$implicit,_=l(2);return b(_.viewDetails(d))}),x(1,"lucide-icon",41),o(2,"span"),a(3,"Continue & Complete"),r()()}if(i&2){let e=l(4);n(),u("img",e.CheckCircleIcon)("size",20)}}function ee(i,t){if(i&1&&(o(0,"div",33),x(1,"lucide-icon",41),o(2,"span"),a(3,"Completed"),r()()),i&2){let e=l(4);n(),u("img",e.CheckCircleIcon)("size",24)}}function te(i,t){if(i&1&&(o(0,"span"),a(1),r()),i&2){l();let e=C(29);n(),Q("",e.length," procedure",e.length!==1?"s":"")}}function ie(i,t){if(i&1&&(o(0,"span",36),a(1),r()),i&2){let e=l(2).$implicit;n(),p("",e.totalCost," EGP")}}function ne(i,t){if(i&1&&(o(0,"span",37),a(1),r()),i&2){l();let e=C(30);n(),p("",e," EGP owed")}}function oe(i,t){if(i&1){let e=y();o(0,"div")(1,"div",19)(2,"div",2)(3,"div",20)(4,"div"),x(5,"lucide-icon",21),r(),o(6,"div",22)(7,"div",23)(8,"h3",24),a(9),r(),o(10,"span"),a(11),r()(),o(12,"div",25)(13,"div",26),x(14,"lucide-icon",27),a(15),r(),o(16,"div",26),x(17,"lucide-icon",27),a(18),r(),c(19,J,2,1,"span"),r(),c(20,K,4,3,"div",28),c(21,X,4,1,"p",29),r()(),o(22,"div",30),c(23,Y,4,2,"button",31)(24,Z,4,2,"button",32)(25,ee,4,2,"div",33),o(26,"button",34),h("click",function(){f(e);let d=l().$implicit,_=l(2);return b(_.viewDetails(d))}),a(27," View Full Details \u2192 "),r(),o(28,"div",35),V(29)(30),c(31,te,2,2,"span"),c(32,ie,2,1,"span",36),c(33,ne,2,1,"span",37),r()()()()()}if(i&2){let e=l().$implicit,s=C(0),d=l(2);w("bg-white rounded-xl shadow-sm border-2 transition-all "+d.getVisitBorderColor(e.status)),n(4),w("w-16 h-16 rounded-full flex items-center justify-center "+d.getVisitBgColor(e.status)),n(),u("img",d.getVisitStatusIcon(e.status))("size",32),n(4),g(s.name),n(),w("px-3 py-1 rounded-full text-xs font-bold uppercase "+d.getVisitStatusColor(e.status)),n(),p(" ",e.status.replace("-"," ")," "),n(3),u("img",d.PhoneIcon)("size",16),n(),p(" ",d.formatPhone(s.phone)," "),n(2),u("img",d.ClockIcon)("size",16),n(),p(" ",d.formatTime(e.date)," "),n(),m(s.age?19:-1),n(),m(s.notes?20:-1),n(),m(e.diagnosis?21:-1),n(2),m(e.status==="waiting"?23:e.status==="in-progress"?24:25),n(6);let _=S(d.visitService.getVisitProcedures(e.id));n();let R=S(d.visitService.getVisitBalance(e.id));n(),m(_.length>0?31:-1),n(),m(e.totalCost>0?32:-1),n(),m(R>0?33:-1)}}function re(i,t){if(i&1&&(V(0),c(1,oe,34,25,"div",18)),i&2){let e=t.$implicit,s=S(l(2).patientService.getPatientById(e.patientId));n(),m(s?1:-1)}}function ae(i,t){if(i&1&&P(0,re,2,2,null,null,W),i&2){let e=l();T(e.todayVisits())}}var O=class i{constructor(t,e){this.visitService=t;this.patientService=e}ClockIcon=$;PlayIcon=B;CheckCircleIcon=M;UserIcon=j;PhoneIcon=N;AlertCircleIcon=z;currentDate=new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});todayVisits=v(()=>this.visitService.getTodayVisits());waitingCount=v(()=>this.todayVisits().filter(t=>t.status==="waiting").length);inProgressCount=v(()=>this.todayVisits().filter(t=>t.status==="in-progress").length);completedCount=v(()=>this.todayVisits().filter(t=>t.status==="completed").length);router=E(L);startVisit(t){try{this.visitService.startVisit(t.id),this.viewDetails(t)}catch(e){alert("Error: "+e.message)}}viewDetails(t){t&&this.router.navigate(["/home/patients"],{queryParams:{openPatient:t.patientId}})}getVisitStatusIcon(t){switch(t){case"waiting":return this.ClockIcon;case"in-progress":return this.PlayIcon;case"completed":return this.CheckCircleIcon;default:return this.ClockIcon}}getVisitStatusColor(t){switch(t){case"waiting":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"in-progress":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}}getVisitBgColor(t){switch(t){case"waiting":return"bg-yellow-500";case"in-progress":return"bg-blue-500";case"completed":return"bg-green-500";default:return"bg-gray-500"}}getVisitBorderColor(t){switch(t){case"waiting":return"border-yellow-300 hover:border-yellow-400";case"in-progress":return"border-blue-300 hover:border-blue-400";case"completed":return"border-green-300 hover:border-green-400";default:return"border-gray-300 hover:border-gray-400"}}formatPhone(t){return t.length===11?t.replace(/(\d{4})(\d{3})(\d{4})/,"$1 $2 $3"):t}formatTime(t){return new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}static \u0275fac=function(e){return new(e||i)(I(U),I(G))};static \u0275cmp=k({type:i,selectors:[["app-queue"]],decls:29,vars:7,consts:[[1,"h-full","bg-gray-50"],[1,"bg-white","border-b","border-gray-200","px-8","py-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-500","mt-1"],[1,"flex","items-center","space-x-4"],[1,"flex","items-center","space-x-6","px-6","py-3","bg-gray-50","rounded-lg"],[1,"text-center"],[1,"text-sm","text-gray-500"],[1,"text-2xl","font-bold","text-yellow-600"],[1,"text-2xl","font-bold","text-blue-600"],[1,"text-2xl","font-bold","text-green-600"],[1,"p-8"],[1,"space-y-4"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","p-16","text-center"],[1,"mx-auto","text-gray-400","mb-4",3,"img","size"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500"],[3,"class"],[1,"p-6"],[1,"flex","items-center","space-x-4","flex-1"],[1,"text-white",3,"img","size"],[1,"flex-1"],[1,"flex","items-center","space-x-3","mb-2"],[1,"text-xl","font-bold","text-gray-900"],[1,"flex","items-center","space-x-6","text-sm","text-gray-600"],[1,"flex","items-center"],[1,"mr-2",3,"img","size"],[1,"flex","items-start","mt-3","p-2","bg-red-50","border","border-red-200","rounded"],[1,"mt-2","text-sm","text-gray-700"],[1,"flex","flex-col","items-end","space-y-2"],[1,"px-6","py-3","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-all","font-semibold","shadow-lg","hover:shadow-xl","flex","items-center","space-x-2"],[1,"px-6","py-3","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-all","font-semibold","shadow-lg","hover:shadow-xl","flex","items-center","space-x-2"],[1,"flex","items-center","space-x-2","text-green-600","font-semibold"],[1,"text-sm","text-blue-600","hover:text-blue-700","font-medium",3,"click"],[1,"flex","items-center","space-x-4","text-xs","text-gray-500","mt-2"],[1,"font-semibold","text-gray-700"],[1,"text-red-600","font-semibold"],[1,"text-red-600","mr-2","mt-0.5","flex-shrink-0",3,"img","size"],[1,"text-sm","text-red-800"],[1,"px-6","py-3","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-all","font-semibold","shadow-lg","hover:shadow-xl","flex","items-center","space-x-2",3,"click"],[3,"img","size"],[1,"px-6","py-3","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-all","font-semibold","shadow-lg","hover:shadow-xl","flex","items-center","space-x-2",3,"click"]],template:function(e,s){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),a(5,"Today's Queue"),r(),o(6,"p",4),a(7),r()(),o(8,"div",5)(9,"div",6)(10,"div",7)(11,"p",8),a(12,"Waiting"),r(),o(13,"p",9),a(14),r()(),o(15,"div",7)(16,"p",8),a(17,"In Progress"),r(),o(18,"p",10),a(19),r()(),o(20,"div",7)(21,"p",8),a(22,"Completed"),r(),o(23,"p",11),a(24),r()()()()()(),o(25,"div",12)(26,"div",13),c(27,H,6,2,"div",14)(28,ae,2,0),r()()()),e&2&&(n(7),D(" ",s.currentDate," - ",s.todayVisits().length," patient",s.todayVisits().length!==1?"s":""," today "),n(7),g(s.waitingCount()),n(5),g(s.inProgressCount()),n(5),g(s.completedCount()),n(3),m(s.todayVisits().length===0?27:28))},dependencies:[F,A,q],styles:["[_nghost-%COMP%]{display:block;height:100%}"]})};export{O as QueueComponent};
