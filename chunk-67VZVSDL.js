import{b as z,c as Q,e as W}from"./chunk-XVAHRLWD.js";import{a as K}from"./chunk-FNZ3CGE5.js";import{a as X}from"./chunk-TNVVAGLP.js";import{C as V,J as A,K as G,L as Y,M as H,c as T,d as C,f as q,l as w,n as D,q as N,t as L}from"./chunk-ESOQDHF6.js";import{h as j}from"./chunk-T2HTACBN.js";import{Aa as B,Kb as F,La as O,Ma as R,N as S,Na as U,Oa as I,Pa as _,Qa as g,Ra as t,S as P,Sa as a,T as M,Ta as u,Ua as $,Va as v,Wa as x,ab as E,ba as y,bb as o,cb as l,da as k,db as p,pa as i,rb as c,sb as m,wa as f,wb as h}from"./chunk-KIKRUHUI.js";var Z=(s,r)=>r.id;function ee(s,r){if(s&1&&(t(0,"div",8)(1,"div",24)(2,"div"),u(3,"lucide-icon",25),a()(),t(4,"h3",26),o(5),c(6,"translate"),a(),t(7,"p",27),o(8),a(),t(9,"p",28),o(10),a()()),s&2){let e=r.$implicit,n=x();i(2),E("w-12 h-12 rounded-lg flex items-center justify-center "+e.color),i(),g("img",n.BarChart3Icon)("size",24),i(2),l(m(6,7,e.label)),i(3),l(e.value),i(2),l(e.change)}}function te(s,r){if(s&1&&(t(0,"div",12),u(1,"lucide-icon",29),t(2,"p",30),o(3),c(4,"translate"),a(),t(5,"p",31),o(6),c(7,"translate"),a()()),s&2){let e=x();i(),g("img",e.CalendarIcon)("size",48),i(2),l(m(4,4,"NO_PATIENTS")),i(3),l(m(7,6,"ADD_NEW_VISIT"))}}function ie(s,r){if(s&1){let e=$();t(0,"div",32)(1,"div",1)(2,"div",33)(3,"div",34),o(4),a(),t(5,"div")(6,"h3",35),o(7),a(),t(8,"p",36),o(9),a()()(),t(10,"div",33)(11,"span",36),o(12),a(),t(13,"span"),o(14),a(),t(15,"button",5),v("click",function(){let d=P(e).$implicit,b=x(2);return M(b.onViewPatient(d.id))}),o(16," View "),a()()()()}if(s&2){let e=r.$implicit,n=x(2);i(4),p(" ",n.getInitials(e.name)," "),i(3),l(e.name),i(2),l(e.phone),i(3),l(e.time),i(),E("px-3 py-1 rounded-full text-xs font-medium "+n.getStatusColor(e.status)),i(),p(" ",e.status.replace("-"," ").toUpperCase()," ")}}function ne(s,r){if(s&1&&(t(0,"div",13),I(1,ie,17,7,"div",32,Z),a()),s&2){let e=x();i(),_(e.todayQueue())}}var J=class s{constructor(r,e){this.patientService=r;this.visitService=e;k(()=>{let n=this.todayQueue().length,d=this.menuItems.find(b=>b.id==="queue");d&&(d.badge=n>0?n.toString():void 0)})}HouseIcon=N;CalendarIcon=T;UsersIcon=A;FileTextIcon=D;DollarSignIcon=w;BarChart3Icon=C;SettingsIcon=V;MenuIcon=L;XIcon=G;ChevronRightIcon=q;sidebarExpanded=y(!0);activeMenu=y("dashboard");menuItems=[{id:"dashboard",icon:N,label:"Dashboard"},{id:"queue",icon:T,label:"Today's Queue",badge:"0"},{id:"patients",icon:A,label:"Patients"},{id:"visits",icon:D,label:"All Visits"},{id:"payments",icon:w,label:"Payments"},{id:"reports",icon:C,label:"Reports"},{id:"settings",icon:V,label:"Settings"}];todayQueue=h(()=>this.visitService.getTodayVisits().map(e=>{let n=this.patientService.getPatientById(e.patientId);return{id:e.id,name:n?.name||"Unknown Patient",phone:n?.phone||"N/A",status:e.status,time:new Date(e.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}}));stats=h(()=>{let r=this.visitService.getTodayVisits(),e=this.visitService.getDailyStats(),n=this.visitService.getFinancialSummary();return[{label:"STAT_TODAYS_PATIENTS",value:e.totalVisits.toString(),change:`+${e.totalVisits} ${this.translate.instant("FROM_YESTERDAY")}`,color:"bg-blue-500"},{label:"STAT_WAITING_NOW",value:r.filter(d=>d.status==="waiting").length.toString(),change:this.translate.instant("IN_QUEUE"),color:"bg-yellow-500"},{label:"STAT_TODAYS_REVENUE",value:`${e.totalIncome} EGP`,change:this.translate.instant("VS_LAST_WEEK"),color:"bg-green-500"},{label:"STAT_UNPAID_VISITS",value:n.unpaidVisitsCount.toString(),change:`${n.totalOwed} EGP ${this.translate.instant("OWED")}`,color:"bg-red-500"}]});recentItems=h(()=>this.visitService.visits().sort((e,n)=>new Date(n.date).getTime()-new Date(e.date).getTime()).slice(0,4).map(e=>{let n=this.patientService.getPatientById(e.patientId),d=this.visitService.getVisitProcedures(e.id),b=d.length>0?d[0].name:"Checkup";return`${n?.name||"Unknown"} - ${b}`}));currentDate=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});router=S(j);translate=S(z);ngOnInit(){this.refreshData()}refreshData(){this.visitService.visits(),this.patientService.patients()}toggleSidebar(){this.sidebarExpanded.set(!this.sidebarExpanded())}setActiveMenu(r){this.activeMenu.set(r)}getStatusColor(r){switch(r){case"in-progress":return"bg-blue-100 text-blue-800";case"waiting":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}getInitials(r){return r.split(" ").map(e=>e[0]).join("").toUpperCase()}onNewPatient(){console.log("Open new patient modal"),this.router.navigate(["/home/patients"],{queryParams:{newPatient:"true"}})}onViewPatient(r){this.router.navigate(["/home/visits"],{queryParams:{openVisit:r}})}onNavigate(r){console.log("Navigate to:",r),this.setActiveMenu(r),this.router.navigate(["home",r])}static \u0275fac=function(e){return new(e||s)(f(K),f(X))};static \u0275cmp=B({type:s,selectors:[["app-dashboard-component"]],decls:54,vars:35,consts:[[1,"bg-white","border-b","border-gray-200","px-8","py-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-500","mt-1"],[1,"flex","items-center","space-x-3"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","text-sm","font-medium",3,"click"],[1,"p-8"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"bg-white","rounded-xl","shadow-sm","p-6","border","border-gray-200"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","mb-8"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"text-lg","font-bold","text-gray-900"],[1,"px-6","py-12","text-center","text-gray-500"],[1,"divide-y","divide-gray-200"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"bg-gradient-to-br","from-blue-500","to-blue-600","rounded-xl","shadow-sm","p-6","text-white"],[1,"mb-4","opacity-80",3,"img","size"],[1,"text-lg","font-semibold","mb-2"],[1,"text-sm","opacity-90","mb-4"],[1,"px-4","py-2","bg-white","text-blue-600","rounded-lg","hover:bg-blue-50","transition-colors","text-sm","font-medium",3,"click"],[1,"bg-gradient-to-br","from-green-500","to-green-600","rounded-xl","shadow-sm","p-6","text-white"],[1,"px-4","py-2","bg-white","text-green-600","rounded-lg","hover:bg-green-50","transition-colors","text-sm","font-medium",3,"click"],[1,"bg-gradient-to-br","from-purple-500","to-purple-600","rounded-xl","shadow-sm","p-6","text-white"],[1,"px-4","py-2","bg-white","text-purple-600","rounded-lg","hover:bg-purple-50","transition-colors","text-sm","font-medium",3,"click"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-white",3,"img","size"],[1,"text-sm","font-medium","text-gray-600","mb-1"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-xs","text-gray-500"],[1,"mx-auto","mb-3","text-gray-300",3,"img","size"],[1,"text-lg","font-medium"],[1,"text-sm","mt-1"],[1,"px-6","py-4","hover:bg-gray-50","transition-colors"],[1,"flex","items-center","space-x-4"],[1,"w-12","h-12","rounded-full","bg-gradient-to-br","from-blue-400","to-blue-600","flex","items-center","justify-center","text-white","font-semibold"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"]],template:function(e,n){e&1&&(t(0,"header",0)(1,"div",1)(2,"div")(3,"h1",2),o(4),c(5,"translate"),a(),t(6,"p",3),o(7),a()(),t(8,"div",4)(9,"button",5),v("click",function(){return n.onNewPatient()}),o(10),c(11,"translate"),a()()()(),t(12,"div",6)(13,"div",7),I(14,ee,11,9,"div",8,U),a(),t(16,"div",9)(17,"div",10)(18,"h2",11),o(19),c(20,"translate"),a()(),O(21,te,8,8,"div",12)(22,ne,3,0,"div",13),a(),t(23,"div",14)(24,"div",15),u(25,"lucide-icon",16),t(26,"h3",17),o(27),c(28,"translate"),a(),t(29,"p",18),o(30,"Register and manage patient records"),a(),t(31,"button",19),v("click",function(){return n.onNavigate("patients")}),o(32),c(33,"translate"),a()(),t(34,"div",20),u(35,"lucide-icon",16),t(36,"h3",17),o(37),c(38,"translate"),a(),t(39,"p",18),o(40,"View and manage all visit history"),a(),t(41,"button",21),v("click",function(){return n.onNavigate("visits")}),o(42),c(43,"translate"),a()(),t(44,"div",22),u(45,"lucide-icon",16),t(46,"h3",17),o(47),c(48,"translate"),a(),t(49,"p",18),o(50,"Track income and outstanding payments"),a(),t(51,"button",23),v("click",function(){return n.onNavigate("reports")}),o(52),c(53,"translate"),a()()()()),e&2&&(i(4),l(m(5,17,"DASHBOARD")),i(3),l(n.currentDate),i(3),p(" ",m(11,19,"NEW_PATIENT")," "),i(4),_(n.stats()),i(5),l(m(20,21,"TODAYS_QUEUE")),i(2),R(n.todayQueue().length===0?21:22),i(4),g("img",n.UsersIcon)("size",32),i(2),l(m(28,23,"PATIENT_MANAGEMENT")),i(5),p(" ",m(33,25,"MANAGE_PATIENTS")," "),i(3),g("img",n.FileTextIcon)("size",32),i(2),l(m(38,27,"VISIT_RECORDS")),i(5),p(" ",m(43,29,"VIEW_VISITS")," "),i(3),g("img",n.BarChart3Icon)("size",32),i(2),l(m(48,31,"FINANCIAL_REPORTS")),i(5),p(" ",m(53,33,"VIEW_REPORTS")," "))},dependencies:[F,H,Y,W,Q],encapsulation:2})};export{J as DashboardComponent};
